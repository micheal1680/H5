<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>重点：HashMap</title>
</head>
<body>
    <script>
        class Node {
            constructor(element,key) {
                this.key = key;
                this.element = element;
                this.next = null
            }
        }
        //构建链表
        class LinkedList {
            constructor() {
                this.head = null;
                this.length = 0;
            }
            append(element,key) {
                let node = new Node(element,key);
                let cu = this.head
                if (this.head == null) {
                    this.head = node
                } else {
                    while (cu.next) {
                        cu = cu.next
                    }
                    cu.next = node
                }
                this.length++
            }
            //删除元素
            removeAt(position) {
                if (position >= 0 && position <= this.length - 1) {
                    if (position == 0) {
                        this.head = this.head.next
                    } else {
                        let num = 0;
                        let cu = this.head;
                        let pre = null
                        while (num < position) {
                            pre = cu;
                            cu = cu.next;
                            num++;
                        }
                        pre.next = cu.next

                    }
                    this.length--
                } else {
                    return false
                }
            }
            insert(element,key, position) {
                if (position >= 0 && position <= this.length - 1) {
                    let node = new Node(element,key)
                    if (position == 0) {
                        node.next = this.head;
                        this.head = node
                    } else {
                        let cu = this.head;
                        let pre = null;
                        let num = 0;
                        while (num < position) {
                            pre = cu;
                            cu = cu.next;
                            num++
                        }
                        pre.next = node;
                        node.next = cu;
                    }
                    this.length++
                }
                else {
                    return false
                }
            }
            getHead() {
                return this.head
            }
        }
        // 构建哈希表
        class HashMap{
            constructor(){
                this.table=[]
            }
            put(key,value){
                if(this.table[this.loselosehashcode(key)]){
                    this.table[this.loselosehashcode(key)].append(value,key)
                }else{
                    let NewLinkedList=new LinkedList();   //将散列表的元素放到链表中
                    NewLinkedList.append(value,key)
                    this.table[this.loselosehashcode(key)]=NewLinkedList
                }
                // let num = this.loselosehashcode(key);    //尽量不用while来做，用链表来做
                // let code = this.table[num]
                // while(code){
                //     num++
                //     code = this.table[num]
                // }
                // this.table[num] = value
            }
            remove(){
                this.table[this.loselosehashcode(key)]=undefined
            }
            loselosehashcode(key){
                let hash=0;
                for(let i=0;i<key.length;i++){
                    hash+=key.charCodeAt(i)
                    console.log(key.charCodeAt(i))
                }
                return hash
            }
            getTables(){
                console.log(this.table)
            }
        }
        let Newhashmap=new HashMap()
        Newhashmap.put('roger','roger@email.com');
        Newhashmap.put('john','john@email.com');
        Newhashmap.getTables()
    
    
    </script>
</body>
</html>